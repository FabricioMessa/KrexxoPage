<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Personajes 7ds Grand Cross</title>
		<link rel="stylesheet" href="/css/personajes.css" />
		<link rel="preload" as="image" href="/characters/Demonios.png" />
		<link rel="preload" as="image" href="/characters/Gigantes.png" />
		<link rel="preload" as="image" href="/characters/Humanos.png" />
		<link rel="preload" as="image" href="/characters/Hadas.png" />
		<link rel="preload" as="image" href="/characters/diosas.png" />
		<link rel="preload" as="image" href="/characters/Desconocidos.png" />
	</head>
	<body>
		<a href="index.html" class="home">
			<ion-icon name="home"></ion-icon>
		</a>
		<section>
			<div class="demonios" data-href="demonios.html" loading="lazy"></div>
			<div class="gigantes" data-href="#" loading="lazy"></div>
			<div class="humanos" data-href="#" loading="lazy"></div>
			<div class="hadas" data-href="hadas.html" loading="lazy"></div>
			<div class="diosas" data-href="diosas.html" loading="lazy"></div>
			<div class="desconocidos" data-href="#" loading="lazy"></div>
		</section>
		<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
		<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
		<script>
			// Esperar a que el DOM esté completamente cargado
			document.addEventListener("DOMContentLoaded", function () {
				// Seleccionar todos los divs de la sección
				const divs = document.querySelectorAll("section div");

				// Configurar la navegación al hacer clic
				divs.forEach((div) => {
					div.style.cursor = "pointer";

					// Precargar las imágenes
					const backgroundImage = getComputedStyle(div).backgroundImage;
					const imageUrl = backgroundImage.slice(5, -2); // Remover 'url()' del string

					const img = new Image();
					img.src = imageUrl;

					// Cuando la imagen termine de cargar, añadir la clase 'loaded'
					img.onload = function () {
						div.classList.add("loaded");
						div.style.opacity = "0.8";
					};

					// Manejar el clic para la navegación
					div.addEventListener("click", () => {
						const href = div.dataset.href;
						if (href && href !== "#") {
							window.location.href = href;
						}
					});
				});

				// Función para manejar el hover con mejor rendimiento
				let hoverTimeout;
				divs.forEach((div) => {
					div.addEventListener("mouseenter", () => {
						clearTimeout(hoverTimeout);
						requestAnimationFrame(() => {
							div.style.width = "300%";
							div.style.opacity = "1";
						});
					});

					div.addEventListener("mouseleave", () => {
						hoverTimeout = setTimeout(() => {
							requestAnimationFrame(() => {
								div.style.width = "0";
								div.style.opacity = "0.8";
							});
						}, 50); // Pequeño delay para suavizar la transición
					});
				});

				// Optimizar el botón de home
				const homeButton = document.querySelector(".home");
				if (homeButton) {
					homeButton.addEventListener("mouseenter", () => {
						requestAnimationFrame(() => {
							homeButton.style.opacity = "1";
						});
					});

					homeButton.addEventListener("mouseleave", () => {
						requestAnimationFrame(() => {
							homeButton.style.opacity = "0.2";
						});
					});
				}
			});

			// Prevenir que las imágenes se arrastren (opcional, pero mejora la experiencia)
			document.addEventListener("dragstart", (e) => {
				if (e.target.tagName === "DIV") {
					e.preventDefault();
				}
			});

			// Manejar errores de carga de imágenes
			window.addEventListener(
				"error",
				function (e) {
					if (e.target.tagName === "IMG") {
						console.error("Error loading image:", e.target.src);
						// Podrías implementar aquí una imagen de fallback si lo deseas
					}
				},
				true
			);
		</script>
	</body>
</html>
